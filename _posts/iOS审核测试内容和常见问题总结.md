# iOS审核测试内容和常见问题总结

随着iOS 12的到来，在我们制作iOS游戏的过程中，可能会有一些功能上的调整和增加，当然也就带来今天要说的题目：游戏在iOS审核的过程中会遇到的一些问题。

**首先来归纳一下我们在iOS提审过程中都要注意哪些测试要点：**

1、商品支付测试

- 商品显示要和提供到苹果后台的数据匹配，不能有上架商品在苹果后台没有注册的情况；
- 出售的道具描述要清晰，道具名称需要和后台数据一致。在游戏里，经常会有一些特殊名称和特殊玩法的商品，最常见的就是周卡、月卡等持续性商品。在提交审核的时候，商品名称切记要和苹果后台注册的商品一致；
- 补单功能：优先考虑做自动补单功能，当充值发生掉单的时候，客户端能够自动重推订单信息；也可以考虑做手动补单功能，补单按钮需要放在明显位置;
- 支付提示信息：在支付过程中需要给予玩家UI反馈，最常见的就是转圈的进度条，不能没有任何提示，这样苹果会以为充值失败。

2、客户端适配测试

- 对于不兼容的版本信息，在打包的时候进行设定；
- 尤其要关注最新机型的特征，例如2015年推出的12.9寸的iPad Pro，还有去年的iPhoneX的刘海屏适配等等。

3、游戏基本测试

- 苹果审核需要提供低级账号和高级帐号，也就是1级新手号和高等级已解锁主要功能的账号。那么我们需要在提审前，对新手关卡以及高级账号解锁的功能的基本流程进行测试，保证不能有卡点；
- UI界面上，一级目录和二级目录下的按钮不能点了没反应。尤其要注意的是商城部分，因为苹果审核员要测试支付，所以商城所有按钮必须有响应。

4、ipv6测试

- 所有客户端访问到的服务器都要换成域名；
- 如果域名解析不到需要有ip访问的备份方案；
- 需要分别测试ipv6和ipv4环境下可以正常登录游戏和支付充值。

**可能会导致iOS被拒的情况和原因**

1、商品支付问题

- 商品信息不匹配：也就是上面说的商品必须是后台注册过的商品，且必须全部展示给苹果审核员；
- 描述不清晰：如果商品描述信息缺失，或者描述信息与实际支付情况不符，也会被拒；
- 支付提示信息：支付过程中不给予玩家反馈；
- 支付不成功后没有补单：如果没有自动补单，一定要在明显位置放置补单按钮；
- 商品价格不能超过99美元：这是苹果的硬性规定。这也就是为什么iOS手游的商品都不会超过648人民币，因为648元最接近99美元的苹果上限。

2、ipv6问题

一般在ipv6测试完成后，不会出现这个情况。如果被拒原因是因为ipv6，那么大多因为网络问题，可以申诉

3、卖场图

- 提供的卖场图需要是游戏内实际截图，如果和游戏内存在较大差异，打回几率很高；
- 同理视频如果采用CG也可能打回。

4、编译工具版本升级导致的代码异常

编译工具版本升级后（比如xcode7到8），要做全面回测，防止因为版本升级导致部分功能异常。

5、抽奖概率

在游戏里，开箱子出道具的功能几乎随处可见。所以需要注意，如果审核员能够看到抽奖类活动，要提前公布抽奖概率。最好把游戏内所有抽奖类活动的概率提前准备出来提供给苹果。

6、账号相关

- 账号注册方式不能只有手机号注册，需要有其他第三方登录方式可供玩家选择；
- 不能存在强制玩家注册的情况；
- 注册界面需要在明显位置放置用户协议。

7、重复app

即马甲包，这个是非常严重的问题，轻则会导致账号进入慢审队列（即再次审核app需要至少1个月审核周期），重则会影响开发者账号的使用，导致此账号下的所有app下架。

8、客户端本身的问题

- 客户端崩溃；
- 无法登入游戏；
- 无法注册；
- 游戏玩法有明显卡点bug。

9、测试账号未提供或登录后没有可用内容

游戏app提交审核的时候，一定要check一下是否提交了测试账号，而且测试账号是否符合苹果标准。如果因为这个被拒，还是很冤的。

10、其他奇葩问题

以上列举的被拒情况，基本都是我在工作中遇到过的，当然还会有其他的情况发生。但是基本上抛开上述问题外，还有一些情况是因为苹果更换了审核员造成的。每个审核员的标准其实都会有主观上的误差，所以如果前次审核通过，但是本次审核被拒，那么是可以对此情况进行邮件申诉的。

**海外iOS审核的注意点**

游戏要发行海外地区，对于iOS来说，区别没有安卓那么大。但是这里有一个点要特别注意一下，就是小包，也就是包体大小不超过100M的客户端，下载后再通过热更把剩余资源更新进来。

以前有些国家和地区，对于iOS小包审核放的比较宽。但是最近审核标准逐渐收紧，例如美国和中国台湾地区，小包被拒的几率越来越高。

**苹果推荐的测试要点**

由于目前有越来越多的游戏希望争取苹果推荐，从而拿到更多资源位和用户，这里简单列举一下苹果推荐的测试要点：

1、订阅型商品

2、iMassage自定义表情包

3、游戏内录像功能

4、Game Center接入

4、游戏内引导玩家进行App Store评分功能

5、3DTouch功能

6、推荐商品：在App Store页面上可以直接购买，点击后启动游戏并直接弹出该商品购买，如果没有下载游戏会先自动下载app并启动