---
layout: post
title: "[转载]Unity数据读写与存档（2）Json：成为神笔马良"
subtitle: "网上看到自己可能用得到的知识文章转载保存，防止时间长了网站没了或者被傻卵中国互联网产品经理以各种缺德的方式想办法让你去用他们的傻卵APP看文章。"
date: 2020-07-06 11:47:37
author: "晴窗v"
header-img: "img/post-bg-css.jpg"
tags:
- Unity
- C#
---
# Unity数据读写与存档（2）Json：成为神笔马良

在上一篇我们知道，通过引入适当的第三方库并编写代码，就可以在Unity内，从Excel表格中读取一些数据。

![img](https://img-blog.csdnimg.cn/20200705171229882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NTg3NjQ1,size_16,color_FFFFFF,t_70)

配置表的存在，的确可以帮助开发团队中没有编程基础的小伙伴管理游戏数据，或者将游戏的策划数据较为方便地批量转移到Unity内；不过，使用Excel来管理游戏数据，功能还是较为有限，而且使用起来不方便。**Excel表格只适合存储简单的文本和数字类数据，对于数组、列表等复杂数据则完全无能为力；此外，读取配置表时必须手动编写非常繁琐的读表逻辑，将表格内各单元格的数据赋值到代码内部的各种变量上。更可怕的是，游戏内有多少个地方需要读表，就要编写多少种不同的读表算法；这对于大型项目来说绝对是可怕的负担。**

> 现在我们希望找到一种更好的方法，来将代码内的数组、列表、乃至自定义类(class)这样的数据原封不动地存储成像“配置表”一样的可阅读文本；也能在适当的时机从上述文本中“读到”这些数据类型，然后将数据还原到代码中。有没有这样的解决方案呢？当然有，Unity为我们提供了UnityEngine.JsonUtility这个静态类。使用它，我们可以将游戏内数据转化为Json字符串，或者从Json字符串或文件中读取数据。

Json是什么东西？网上可以查到详细的解释，但那些解释对我们将要实现的功能而言没有什么用。目前你只需要知道：**Json是一种以特殊格式写成的字符串或者文件，它可以用于表示我们代码中的某些数据。**

#### **1.使用Json记录和读入数据**

我们直接来模拟一个情境，并且看一段代码。

假设我们的游戏中存在人物（Person）类，人物具有名字、生命值和移动速度。